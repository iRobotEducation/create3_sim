<?xml version="1.0"?>
<robot xmlns:xacro="http://ros.org/wiki/xacro">
<xacro:include filename="$(find irobot_create_description)/urdf/wheel.xacro" />

<xacro:macro name="wheel_with_wheeldrop" params="name parent_link *origin">

  <xacro:property name="wheel_mass" value="0.2" /> <!-- [kg] -->
  <xacro:property name="wheel_radius" value="0.03575" /> <!-- [m] -->
  <xacro:property name="wheel_width" value="0.015" /> <!-- [m] -->

  <joint name="wheel_${name}_axle_joint" type="prismatic">
    <parent link="${parent_link}"/>
    <child link="wheel_${name}_axle_link"/>
    <xacro:insert_block name="origin"/>
    <axis xyz="0 1 0"/>
    <limit lower="0.0" upper="0.03" effort="100" velocity="1"/>
  </joint>

  <!-- Gazebo parameters to simulate a spring -->
  <gazebo reference="wheel_${name}_axle_joint">
    <implicitSpringDamper>true</implicitSpringDamper>
    <springStiffness>300</springStiffness>
    <springReference>0.03</springReference>
  </gazebo>

  <link name="wheel_${name}_axle_link">
      <xacro:inertial_cuboid mass="0.05"
                             x_length="0.15"
                             y_length="0.15"
                             z_length="0.15"/>
  </link>
  <!-- Wheel definition -->
  <xacro:wheel name="${name}" parent_link="wheel_${name}_axle_link">
    <origin xyz="0 0 0" rpy="0 0 0"/>
  </xacro:wheel>

</xacro:macro>
</robot>